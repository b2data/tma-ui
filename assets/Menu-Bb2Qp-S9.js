import{j as q}from"./jsx-runtime-D_zvdyIk.js";import{b as gt,r as u}from"./index-2yJIXLcc.js";import{T as ht}from"./Tappable-Bi9o3b7s.js";import{M as yt}from"./file-zip-BXERkKO-.js";import{r as Et,i as re,a as X,b as Ce,q as Rt,h as Ie,f as xt,c as wt,m as it}from"./floating-ui.utils.dom-C54ba6qF.js";import"./index-D-es_Zdh.js";import{u as Tt,a as St,o as Ct,f as It,s as kt}from"./floating-ui.react-dom-CmOQJs4M.js";import{c as At}from"./classNames-BjxpnYM-.js";const Mt="_menu_1pugl_1",Pt={menu:Mt};function se(e){let t=e.activeElement;for(;((r=t)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;t=t.shadowRoot.activeElement}return t}function j(e,t){if(!e||!t)return!1;const r=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&Et(r)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function Ot(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function at(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:r,version:n}=t;return r+"/"+n}).join(" "):navigator.userAgent}function Ft(e){return e.mozInputSource===0&&e.isTrusted?!0:Fe()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Nt(e){return Lt()?!1:!Fe()&&e.width===0&&e.height===0||Fe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Dt(){return/apple/i.test(navigator.vendor)}function Fe(){const e=/android/i;return e.test(Ot())||e.test(at())}function Lt(){return at().includes("jsdom/")}function je(e,t){return["mouse","pen"].includes(e)}function _t(e){return"nativeEvent"in e}function $t(e){return e.matches("html,body")}function U(e){return(e==null?void 0:e.ownerDocument)||document}function ke(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return r.target!=null&&t.contains(r.target)}function ae(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Kt="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function ut(e){return re(e)&&e.matches(Kt)}function Ae(e){e.preventDefault(),e.stopPropagation()}function Vt(e){return e?e.getAttribute("role")==="combobox"&&ut(e):!1}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Bt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],xe=Bt.join(","),ct=typeof Element>"u",de=ct?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,we=!ct&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Te=function e(t,r){var n;r===void 0&&(r=!0);var o=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),i=o===""||o==="true",s=i||r&&t&&e(t.parentNode);return s},jt=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},qt=function(t,r,n){if(Te(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(xe));return r&&de.call(t,xe)&&o.unshift(t),o=o.filter(n),o},Ht=function e(t,r,n){for(var o=[],i=Array.from(t);i.length;){var s=i.shift();if(!Te(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),d=a.length?a:s.children,c=e(d,!0,n);n.flatten?o.push.apply(o,c):o.push({scopeParent:s,candidates:c})}else{var g=de.call(s,xe);g&&n.filter(s)&&(r||!t.includes(s))&&o.push(s);var m=s.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(s),C=!Te(m,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(s));if(m&&C){var l=e(m===!0?s.children:m.children,!0,n);n.flatten?o.push.apply(o,l):o.push({scopeParent:s,candidates:l})}else i.unshift.apply(i,s.children)}}return o},lt=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},ft=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||jt(t))&&!lt(t)?0:t.tabIndex},Wt=function(t,r){var n=ft(t);return n<0&&r&&!lt(t)?0:n},Ut=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},dt=function(t){return t.tagName==="INPUT"},Gt=function(t){return dt(t)&&t.type==="hidden"},Yt=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},Xt=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},zt=function(t){if(!t.name)return!0;var r=t.form||we(t),n=function(a){return r.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=n(window.CSS.escape(t.name));else try{o=n(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=Xt(o,t.form);return!i||i===t},Zt=function(t){return dt(t)&&t.type==="radio"},Jt=function(t){return Zt(t)&&!zt(t)},Qt=function(t){var r,n=t&&we(t),o=(r=n)===null||r===void 0?void 0:r.host,i=!1;if(n&&n!==t){var s,a,d;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||t!=null&&(d=t.ownerDocument)!==null&&d!==void 0&&d.contains(t));!i&&o;){var c,g,m;n=we(o),o=(c=n)===null||c===void 0?void 0:c.host,i=!!((g=o)!==null&&g!==void 0&&(m=g.ownerDocument)!==null&&m!==void 0&&m.contains(o))}}return i},qe=function(t){var r=t.getBoundingClientRect(),n=r.width,o=r.height;return n===0&&o===0},en=function(t,r){var n=r.displayCheck,o=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=de.call(t,"details>summary:first-of-type"),s=i?t.parentElement:t;if(de.call(s,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof o=="function"){for(var a=t;t;){var d=t.parentElement,c=we(t);if(d&&!d.shadowRoot&&o(d)===!0)return qe(t);t.assignedSlot?t=t.assignedSlot:!d&&c!==t.ownerDocument?t=c.host:t=d}t=a}if(Qt(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return qe(t);return!1},tn=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var o=r.children.item(n);if(o.tagName==="LEGEND")return de.call(r,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}r=r.parentElement}return!1},nn=function(t,r){return!(r.disabled||Te(r)||Gt(r)||en(r,t)||Yt(r)||tn(r))},Ne=function(t,r){return!(Jt(r)||ft(r)<0||!nn(t,r))},rn=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},on=function e(t){var r=[],n=[];return t.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,d=Wt(a,s),c=s?e(o.candidates):a;d===0?s?r.push.apply(r,c):r.push(a):n.push({documentOrder:i,tabIndex:d,item:o,isScope:s,content:c})}),n.sort(Ut).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(r)},Le=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Ht([t],r.includeContainer,{filter:Ne.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:rn}):n=qt(t,r.includeContainer,Ne.bind(null,r)),on(n)},sn=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return de.call(t,xe)===!1?!1:Ne(r,t)};const pt={...gt},an=pt.useInsertionEffect,un=an||(e=>e());function Q(e){const t=u.useRef(()=>{});return un(()=>{t.current=e}),u.useCallback(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.current==null?void 0:t.current(...n)},[])}var ee=typeof document<"u"?u.useLayoutEffect:u.useEffect;let He=!1,cn=0;const We=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+cn++;function ln(){const[e,t]=u.useState(()=>He?We():void 0);return ee(()=>{e==null&&t(We())},[]),u.useEffect(()=>{He=!0},[]),e}const fn=pt.useId,_e=fn||ln;function dn(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(o=>o(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(o=>o!==r))||[])}}}const pn=u.createContext(null),bn=u.createContext(null),bt=()=>{var e;return((e=u.useContext(pn))==null?void 0:e.id)||null},$e=()=>u.useContext(bn);function Se(e){return"data-floating-ui-"+e}function Me(e){const t=u.useRef(e);return ee(()=>{t.current=e}),t}let Ue=0;function le(e,t){t===void 0&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:o=!1}=t;n&&cancelAnimationFrame(Ue);const i=()=>e==null?void 0:e.focus({preventScroll:r});o?i():Ue=requestAnimationFrame(i)}function Ge(e,t){var r;let n=[],o=(r=e.find(i=>i.id===t))==null?void 0:r.parentId;for(;o;){const i=e.find(s=>s.id===o);o=i==null?void 0:i.parentId,i&&(n=n.concat(i))}return n}function ve(e,t){let r=e.filter(o=>{var i;return o.parentId===t&&((i=o.context)==null?void 0:i.open)}),n=r;for(;n.length;)n=e.filter(o=>{var i;return(i=n)==null?void 0:i.some(s=>{var a;return o.parentId===s.id&&((a=o.context)==null?void 0:a.open)})}),r=r.concat(n);return r}let fe=new WeakMap,Ee=new WeakSet,Re={},Pe=0;const vn=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,vt=e=>e&&(e.host||vt(e.parentNode)),mn=(e,t)=>t.map(r=>{if(e.contains(r))return r;const n=vt(r);return e.contains(n)?n:null}).filter(r=>r!=null);function gn(e,t,r,n){const o="data-floating-ui-inert",i=n?"inert":r?"aria-hidden":null,s=mn(t,e),a=new Set,d=new Set(s),c=[];Re[o]||(Re[o]=new WeakMap);const g=Re[o];s.forEach(m),C(t),a.clear();function m(l){!l||a.has(l)||(a.add(l),l.parentNode&&m(l.parentNode))}function C(l){!l||d.has(l)||[].forEach.call(l.children,b=>{if(it(b)!=="script")if(a.has(b))C(b);else{const f=i?b.getAttribute(i):null,k=f!==null&&f!=="false",v=fe.get(b)||0,S=i?v+1:v,I=(g.get(b)||0)+1;fe.set(b,S),g.set(b,I),c.push(b),S===1&&k&&Ee.add(b),I===1&&b.setAttribute(o,""),!k&&i&&b.setAttribute(i,"true")}})}return Pe++,()=>{c.forEach(l=>{const b=fe.get(l)||0,f=i?b-1:b,k=(g.get(l)||0)-1;fe.set(l,f),g.set(l,k),f||(!Ee.has(l)&&i&&l.removeAttribute(i),Ee.delete(l)),k||l.removeAttribute(o)}),Pe--,Pe||(fe=new WeakMap,fe=new WeakMap,Ee=new WeakSet,Re={})}}function Ye(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=U(e[0]).body;return gn(e.concat(Array.from(n.querySelectorAll("[aria-live]"))),n,t,r)}const Ke=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function mt(e,t){const r=Le(e,Ke());t==="prev"&&r.reverse();const n=r.indexOf(se(U(e)));return r.slice(n+1)[0]}function hn(){return mt(document.body,"next")}function yn(){return mt(document.body,"prev")}function Xe(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!j(r,n)}const Ve={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},ze=u.forwardRef(function(t,r){const[n,o]=u.useState();ee(()=>{Dt()&&o("button")},[]);const i={ref:r,tabIndex:0,role:n,"aria-hidden":n?void 0:!0,[Se("focus-guard")]:"",style:Ve};return q.jsx("span",{...t,...i})}),En=u.createContext(null),Rn=()=>u.useContext(En),De="data-floating-ui-focusable";function Ze(e){return e?e.hasAttribute(De)?e:e.querySelector("["+De+"]")||e:null}function Je(e){return u.useMemo(()=>t=>{e.forEach(r=>{r&&(r.current=t)})},e)}const xn=20;let ie=[];function wn(e){ie=ie.filter(t=>t.isConnected),e&&it(e)!=="body"&&(ie.push(e),ie.length>xn&&(ie=ie.slice(-20)))}function Qe(){return ie.slice().reverse().find(e=>e.isConnected)}function Tn(e){const t=Ke();return sn(e,t)?e:Le(e,t)[0]||e}const Sn=u.forwardRef(function(t,r){return q.jsx("button",{...t,type:"button",ref:r,tabIndex:-1,style:Ve})});function Cn(e){const{context:t,children:r,disabled:n=!1,order:o=["content"],guards:i=!0,initialFocus:s=0,returnFocus:a=!0,restoreFocus:d=!1,modal:c=!0,visuallyHiddenDismiss:g=!1,closeOnFocusOut:m=!0,outsideElementsInert:C=!1}=e,{open:l,onOpenChange:b,events:f,dataRef:k,elements:{domReference:v,floating:S}}=t,I=Q(()=>{var y;return(y=k.current.floatingContext)==null?void 0:y.nodeId}),B=typeof s=="number"&&s<0,H=Vt(v)&&B,te=vn(),z=te?i:!0,oe=!z||te&&C,O=Me(o),ue=Me(s),Z=Me(a),$=$e(),x=Rn(),ce=u.useRef(null),R=u.useRef(null),A=u.useRef(!1),L=u.useRef(!1),F=u.useRef(-1),E=x!=null,p=Ze(S),M=Q(function(y){return y===void 0&&(y=p),y?Le(y,Ke()):[]}),K=Q(y=>{const w=M(y);return O.current.map(h=>v&&h==="reference"?v:p&&h==="floating"?p:w).filter(Boolean).flat()});u.useEffect(()=>{if(n||!c)return;function y(h){if(h.key==="Tab"){j(p,se(U(p)))&&M().length===0&&!H&&Ae(h);const T=K(),P=ae(h);O.current[0]==="reference"&&P===v&&(Ae(h),h.shiftKey?le(T[T.length-1]):le(T[1])),O.current[1]==="floating"&&P===p&&h.shiftKey&&(Ae(h),le(T[0]))}}const w=U(p);return w.addEventListener("keydown",y),()=>{w.removeEventListener("keydown",y)}},[n,v,p,c,O,H,M,K]),u.useEffect(()=>{if(n||!S)return;function y(w){const h=ae(w),P=M().indexOf(h);P!==-1&&(F.current=P)}return S.addEventListener("focusin",y),()=>{S.removeEventListener("focusin",y)}},[n,S,M]),u.useEffect(()=>{if(n||!m)return;function y(){L.current=!0,setTimeout(()=>{L.current=!1})}function w(h){const T=h.relatedTarget;queueMicrotask(()=>{const P=I(),N=!(j(v,T)||j(S,T)||j(T,S)||j(x==null?void 0:x.portalNode,T)||T!=null&&T.hasAttribute(Se("focus-guard"))||$&&(ve($.nodesRef.current,P).find(_=>{var D,G;return j((D=_.context)==null?void 0:D.elements.floating,T)||j((G=_.context)==null?void 0:G.elements.domReference,T)})||Ge($.nodesRef.current,P).find(_=>{var D,G,J;return[(D=_.context)==null?void 0:D.elements.floating,Ze((G=_.context)==null?void 0:G.elements.floating)].includes(T)||((J=_.context)==null?void 0:J.elements.domReference)===T})));if(d&&N&&se(U(p))===U(p).body){re(p)&&p.focus();const _=F.current,D=M(),G=D[_]||D[D.length-1]||p;re(G)&&G.focus()}(H||!c)&&T&&N&&!L.current&&T!==Qe()&&(A.current=!0,b(!1,h,"focus-out"))})}if(S&&re(v))return v.addEventListener("focusout",w),v.addEventListener("pointerdown",y),S.addEventListener("focusout",w),()=>{v.removeEventListener("focusout",w),v.removeEventListener("pointerdown",y),S.removeEventListener("focusout",w)}},[n,v,S,p,c,$,x,b,m,d,M,H,I]);const pe=u.useRef(null),me=u.useRef(null),ge=Je([pe,x==null?void 0:x.beforeInsideRef]),V=Je([me,x==null?void 0:x.afterInsideRef]);u.useEffect(()=>{var y;if(n||!S)return;const w=Array.from((x==null||(y=x.portalNode)==null?void 0:y.querySelectorAll("["+Se("portal")+"]"))||[]),h=$&&!c?Ge($==null?void 0:$.nodesRef.current,I()).map(N=>{var _;return(_=N.context)==null?void 0:_.elements.floating}):[],T=[S,...w,...h,ce.current,R.current,pe.current,me.current,x==null?void 0:x.beforeOutsideRef.current,x==null?void 0:x.afterOutsideRef.current,O.current.includes("reference")||H?v:null].filter(N=>N!=null),P=c||H?Ye(T,!oe,oe):Ye(T);return()=>{P()}},[n,v,S,c,O,x,H,z,oe,$,I]),ee(()=>{if(n||!re(p))return;const y=U(p),w=se(y);queueMicrotask(()=>{const h=K(p),T=ue.current,P=(typeof T=="number"?h[T]:T.current)||p,N=j(p,w);!B&&!N&&l&&le(P,{preventScroll:P===p})})},[n,l,p,B,K,ue]),ee(()=>{if(n||!p)return;let y=!1,w=!1;const h=U(p),T=se(h);let N=k.current.openEvent;wn(T);function _(J){let{open:he,reason:be,event:Y,nested:ye}=J;if(he&&(N=Y),be==="escape-key"&&(w=!0),["hover","safe-polygon"].includes(be)&&Y.type==="mouseleave"&&(A.current=!0),be==="outside-press")if(ye)A.current=!1,y=!0;else if(Ft(Y)||Nt(Y))A.current=!1;else{let Be=!1;document.createElement("div").focus({get preventScroll(){return Be=!0,!1}}),Be?(A.current=!1,y=!0):A.current=!0}}f.on("openchange",_);const D=h.createElement("span");D.setAttribute("tabindex","-1"),D.setAttribute("aria-hidden","true"),Object.assign(D.style,Ve),E&&v&&v.insertAdjacentElement("afterend",D);function G(){return typeof Z.current=="boolean"?w&&v?v:Qe()||D:Z.current.current||D}return()=>{f.off("openchange",_);const J=se(h),he=j(S,J)||$&&ve($.nodesRef.current,I()).some(Y=>{var ye;return j((ye=Y.context)==null?void 0:ye.elements.floating,J)});(he||N&&["click","mousedown"].includes(N.type))&&(w=!0);const be=G();queueMicrotask(()=>{const Y=Tn(be);Z.current&&!A.current&&re(Y)&&(!(Y!==J&&J!==h.body)||he)&&Y.focus({preventScroll:y}),D.remove()})}},[n,S,p,Z,k,f,$,E,v,I]),u.useEffect(()=>{queueMicrotask(()=>{A.current=!1})},[n]),ee(()=>{if(!n&&x)return x.setFocusManagerState({modal:c,closeOnFocusOut:m,open:l,onOpenChange:b,domReference:v}),()=>{x.setFocusManagerState(null)}},[n,x,c,l,b,m,v]),ee(()=>{if(n||!p||typeof MutationObserver!="function"||B)return;const y=()=>{const h=p.getAttribute("tabindex"),T=M(),P=se(U(S)),N=T.indexOf(P);N!==-1&&(F.current=N),O.current.includes("floating")||P!==v&&T.length===0?h!=="0"&&p.setAttribute("tabindex","0"):h!=="-1"&&p.setAttribute("tabindex","-1")};y();const w=new MutationObserver(y);return w.observe(p,{childList:!0,subtree:!0,attributes:!0}),()=>{w.disconnect()}},[n,S,p,v,O,M,B]);function W(y){return n||!g||!c?null:q.jsx(Sn,{ref:y==="start"?ce:R,onClick:w=>b(!1,w.nativeEvent),children:typeof g=="string"?g:"Dismiss"})}const ne=!n&&z&&(c?!H:!0)&&(E||c);return q.jsxs(q.Fragment,{children:[ne&&q.jsx(ze,{"data-type":"inside",ref:ge,onFocus:y=>{if(c){const h=K();le(o[0]==="reference"?h[0]:h[h.length-1])}else if(x!=null&&x.preserveTabOrder&&x.portalNode)if(A.current=!1,Xe(y,x.portalNode)){const h=hn()||v;h==null||h.focus()}else{var w;(w=x.beforeOutsideRef.current)==null||w.focus()}}}),!H&&W("start"),r,W("end"),ne&&q.jsx(ze,{"data-type":"inside",ref:V,onFocus:y=>{if(c)le(K()[0]);else if(x!=null&&x.preserveTabOrder&&x.portalNode)if(m&&(A.current=!0),Xe(y,x.portalNode)){const h=yn()||v;h==null||h.focus()}else{var w;(w=x.afterOutsideRef.current)==null||w.focus()}}})]})}function et(e){return re(e.target)&&e.target.tagName==="BUTTON"}function tt(e){return ut(e)}function In(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:o,elements:{domReference:i}}=e,{enabled:s=!0,event:a="click",toggle:d=!0,ignoreMouse:c=!1,keyboardHandlers:g=!0,stickIfOpen:m=!0}=t,C=u.useRef(),l=u.useRef(!1),b=u.useMemo(()=>({onPointerDown(f){C.current=f.pointerType},onMouseDown(f){const k=C.current;f.button===0&&a!=="click"&&(je(k)&&c||(r&&d&&(!(o.current.openEvent&&m)||o.current.openEvent.type==="mousedown")?n(!1,f.nativeEvent,"click"):(f.preventDefault(),n(!0,f.nativeEvent,"click"))))},onClick(f){const k=C.current;if(a==="mousedown"&&C.current){C.current=void 0;return}je(k)&&c||(r&&d&&(!(o.current.openEvent&&m)||o.current.openEvent.type==="click")?n(!1,f.nativeEvent,"click"):n(!0,f.nativeEvent,"click"))},onKeyDown(f){C.current=void 0,!(f.defaultPrevented||!g||et(f))&&(f.key===" "&&!tt(i)&&(f.preventDefault(),l.current=!0),f.key==="Enter"&&n(!(r&&d),f.nativeEvent,"click"))},onKeyUp(f){f.defaultPrevented||!g||et(f)||tt(i)||f.key===" "&&l.current&&(l.current=!1,n(!(r&&d),f.nativeEvent,"click"))}}),[o,i,a,c,g,n,r,m,d]);return u.useMemo(()=>s?{reference:b}:{},[s,b])}const kn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},An={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},nt=e=>{var t,r;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(r=e==null?void 0:e.outsidePress)!=null?r:!0}};function Mn(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,elements:o,dataRef:i}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:d=!0,outsidePressEvent:c="pointerdown",referencePress:g=!1,referencePressEvent:m="pointerdown",ancestorScroll:C=!1,bubbles:l,capture:b}=t,f=$e(),k=Q(typeof d=="function"?d:()=>!1),v=typeof d=="function"?k:d,S=u.useRef(!1),I=u.useRef(!1),{escapeKey:B,outsidePress:H}=nt(l),{escapeKey:te,outsidePress:z}=nt(b),oe=u.useRef(!1),O=Q(R=>{var A;if(!r||!s||!a||R.key!=="Escape"||oe.current)return;const L=(A=i.current.floatingContext)==null?void 0:A.nodeId,F=f?ve(f.nodesRef.current,L):[];if(!B&&(R.stopPropagation(),F.length>0)){let E=!0;if(F.forEach(p=>{var M;if((M=p.context)!=null&&M.open&&!p.context.dataRef.current.__escapeKeyBubbles){E=!1;return}}),!E)return}n(!1,_t(R)?R.nativeEvent:R,"escape-key")}),ue=Q(R=>{var A;const L=()=>{var F;O(R),(F=ae(R))==null||F.removeEventListener("keydown",L)};(A=ae(R))==null||A.addEventListener("keydown",L)}),Z=Q(R=>{var A;const L=S.current;S.current=!1;const F=I.current;if(I.current=!1,c==="click"&&F||L||typeof v=="function"&&!v(R))return;const E=ae(R),p="["+Se("inert")+"]",M=U(o.floating).querySelectorAll(p);let K=X(E)?E:null;for(;K&&!Ie(K);){const V=xt(K);if(Ie(V)||!X(V))break;K=V}if(M.length&&X(E)&&!$t(E)&&!j(E,o.floating)&&Array.from(M).every(V=>!j(K,V)))return;if(re(E)&&ce){const V=Ie(E),W=wt(E),ne=/auto|scroll/,y=V||ne.test(W.overflowX),w=V||ne.test(W.overflowY),h=y&&E.clientWidth>0&&E.scrollWidth>E.clientWidth,T=w&&E.clientHeight>0&&E.scrollHeight>E.clientHeight,P=W.direction==="rtl",N=T&&(P?R.offsetX<=E.offsetWidth-E.clientWidth:R.offsetX>E.clientWidth),_=h&&R.offsetY>E.clientHeight;if(N||_)return}const pe=(A=i.current.floatingContext)==null?void 0:A.nodeId,me=f&&ve(f.nodesRef.current,pe).some(V=>{var W;return ke(R,(W=V.context)==null?void 0:W.elements.floating)});if(ke(R,o.floating)||ke(R,o.domReference)||me)return;const ge=f?ve(f.nodesRef.current,pe):[];if(ge.length>0){let V=!0;if(ge.forEach(W=>{var ne;if((ne=W.context)!=null&&ne.open&&!W.context.dataRef.current.__outsidePressBubbles){V=!1;return}}),!V)return}n(!1,R,"outside-press")}),$=Q(R=>{var A;const L=()=>{var F;Z(R),(F=ae(R))==null||F.removeEventListener(c,L)};(A=ae(R))==null||A.addEventListener(c,L)});u.useEffect(()=>{if(!r||!s)return;i.current.__escapeKeyBubbles=B,i.current.__outsidePressBubbles=H;let R=-1;function A(M){n(!1,M,"ancestor-scroll")}function L(){window.clearTimeout(R),oe.current=!0}function F(){R=window.setTimeout(()=>{oe.current=!1},Rt()?5:0)}const E=U(o.floating);a&&(E.addEventListener("keydown",te?ue:O,te),E.addEventListener("compositionstart",L),E.addEventListener("compositionend",F)),v&&E.addEventListener(c,z?$:Z,z);let p=[];return C&&(X(o.domReference)&&(p=Ce(o.domReference)),X(o.floating)&&(p=p.concat(Ce(o.floating))),!X(o.reference)&&o.reference&&o.reference.contextElement&&(p=p.concat(Ce(o.reference.contextElement)))),p=p.filter(M=>{var K;return M!==((K=E.defaultView)==null?void 0:K.visualViewport)}),p.forEach(M=>{M.addEventListener("scroll",A,{passive:!0})}),()=>{a&&(E.removeEventListener("keydown",te?ue:O,te),E.removeEventListener("compositionstart",L),E.removeEventListener("compositionend",F)),v&&E.removeEventListener(c,z?$:Z,z),p.forEach(M=>{M.removeEventListener("scroll",A)}),window.clearTimeout(R)}},[i,o,a,v,c,r,n,C,s,B,H,O,te,ue,Z,z,$]),u.useEffect(()=>{S.current=!1},[v,c]);const x=u.useMemo(()=>({onKeyDown:O,...g&&{[kn[m]]:R=>{n(!1,R.nativeEvent,"reference-press")},...m!=="click"&&{onClick(R){n(!1,R.nativeEvent,"reference-press")}}}}),[O,n,g,m]),ce=u.useMemo(()=>({onKeyDown:O,onMouseDown(){I.current=!0},onMouseUp(){I.current=!0},[An[c]]:()=>{S.current=!0}}),[O,c]);return u.useMemo(()=>s?{reference:x,floating:ce}:{},[s,x,ce])}function Pn(e){const{open:t=!1,onOpenChange:r,elements:n}=e,o=_e(),i=u.useRef({}),[s]=u.useState(()=>dn()),a=bt()!=null,[d,c]=u.useState(n.reference),g=Q((l,b,f)=>{i.current.openEvent=l?b:void 0,s.emit("openchange",{open:l,event:b,reason:f,nested:a}),r==null||r(l,b,f)}),m=u.useMemo(()=>({setPositionReference:c}),[]),C=u.useMemo(()=>({reference:d||n.reference||null,floating:n.floating||null,domReference:n.reference}),[d,n.reference,n.floating]);return u.useMemo(()=>({dataRef:i,open:t,onOpenChange:g,elements:C,events:s,floatingId:o,refs:m}),[t,g,C,s,o,m])}function On(e){e===void 0&&(e={});const{nodeId:t}=e,r=Pn({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,o=n.elements,[i,s]=u.useState(null),[a,d]=u.useState(null),g=(o==null?void 0:o.domReference)||i,m=u.useRef(null),C=$e();ee(()=>{g&&(m.current=g)},[g]);const l=Tt({...e,elements:{...o,...a&&{reference:a}}}),b=u.useCallback(I=>{const B=X(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),contextElement:I}:I;d(B),l.refs.setReference(B)},[l.refs]),f=u.useCallback(I=>{(X(I)||I===null)&&(m.current=I,s(I)),(X(l.refs.reference.current)||l.refs.reference.current===null||I!==null&&!X(I))&&l.refs.setReference(I)},[l.refs]),k=u.useMemo(()=>({...l.refs,setReference:f,setPositionReference:b,domReference:m}),[l.refs,f,b]),v=u.useMemo(()=>({...l.elements,domReference:g}),[l.elements,g]),S=u.useMemo(()=>({...l,...n,refs:k,elements:v,nodeId:t}),[l,k,v,t,n]);return ee(()=>{n.dataRef.current.floatingContext=S;const I=C==null?void 0:C.nodesRef.current.find(B=>B.id===t);I&&(I.context=S)}),u.useMemo(()=>({...l,context:S,refs:k,elements:v}),[l,k,v,S])}const rt="active",ot="selected";function Oe(e,t,r){const n=new Map,o=r==="item";let i=e;if(o&&e){const{[rt]:s,[ot]:a,...d}=e;i=d}return{...r==="floating"&&{tabIndex:-1,[De]:""},...i,...t.map(s=>{const a=s?s[r]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(d=>{let[c,g]=d;if(!(o&&[rt,ot].includes(c)))if(c.indexOf("on")===0){if(n.has(c)||n.set(c,[]),typeof g=="function"){var m;(m=n.get(c))==null||m.push(g),s[c]=function(){for(var C,l=arguments.length,b=new Array(l),f=0;f<l;f++)b[f]=arguments[f];return(C=n.get(c))==null?void 0:C.map(k=>k(...b)).find(k=>k!==void 0)}}}else s[c]=g}),s),{})}}function Fn(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),r=e.map(a=>a==null?void 0:a.floating),n=e.map(a=>a==null?void 0:a.item),o=u.useCallback(a=>Oe(a,e,"reference"),t),i=u.useCallback(a=>Oe(a,e,"floating"),r),s=u.useCallback(a=>Oe(a,e,"item"),n);return u.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const Nn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Dn(e,t){var r;t===void 0&&(t={});const{open:n,floatingId:o}=e,{enabled:i=!0,role:s="dialog"}=t,a=(r=Nn.get(s))!=null?r:s,d=_e(),g=bt()!=null,m=u.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:n?o:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":n?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:d},...a==="menu"&&g&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,o,g,n,d,s]),C=u.useMemo(()=>{const b={id:o,...a&&{role:a}};return a==="tooltip"||s==="label"?b:{...b,...a==="menu"&&{"aria-labelledby":d}}},[a,o,d,s]),l=u.useCallback(b=>{let{active:f,selected:k}=b;const v={role:"option",...f&&{id:o+"-option"}};switch(s){case"select":return{...v,"aria-selected":f&&k};case"combobox":return{...v,...f&&{"aria-selected":!0}}}return{}},[o,s]);return u.useMemo(()=>i?{reference:m,floating:C,item:l}:{},[i,m,C,l])}const st=({action:e=q.jsx(yt,{}),className:t,closeOnClick:r=!0,children:n,...o})=>{const[i,s]=u.useState(!1),{refs:a,floatingStyles:d,context:c}=On({open:i,onOpenChange:s,middleware:[Ct(10),It(),kt()],whileElementsMounted:St}),g=In(c),m=Mn(c),C=Dn(c),{getReferenceProps:l,getFloatingProps:b}=Fn([g,m,C]),f=_e();return q.jsxs(q.Fragment,{children:[q.jsx(ht,{ref:a.setReference,...l(),children:e}),i&&q.jsx(Cn,{context:c,modal:!1,children:q.jsx("div",{className:At(Pt.menu,t),ref:a.setFloating,style:d,"aria-labelledby":f,...b(),...r?{onClick:()=>s(!1)}:{},...o,children:n})})]})};try{st.displayName="Menu",st.__docgenInfo={description:"",displayName:"Menu",props:{action:{defaultValue:{value:"<MoreHorizIcon />"},description:"The action element or component that triggers the menu to open",name:"action",required:!1,type:{name:"ReactNode"}},closeOnClick:{defaultValue:{value:"true"},description:"If `true` the popover will be closed once child content is clicked",name:"closeOnClick",required:!1,type:{name:"boolean"}},Component:{defaultValue:null,description:"The component type to render, allowing for semantic HTML use. Defaults to 'div'.",name:"Component",required:!1,type:{name:"ElementType"}},interactiveAnimation:{defaultValue:null,description:"Animation that will be shown when component will be tapped.",name:"interactiveAnimation",required:!1,type:{name:"enum",value:[{value:'"opacity"'},{value:'"background"'}]}}}}}catch{}export{st as M};
